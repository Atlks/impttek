Atitit 项目的http rest接口.docx


	1. Ptp mtp ums协议接口	1
	2. 扩展rest接口	1
	2.1. 扩展rest接口可以拓展额外的功能。以及结构化查询 精细化 。。统计等。。	1
	2.2. 接口数据格式 一般为json了。。	1
	2.3. 常见场景	2
	2.4. 查询文件与图片与影片meta元数据（方便精细化结构化查询）	2
	2.4.1. 参数为json对象，具体字段如下	2
	2.4.2. 返回 ：json数组	3
	2.5. 操作与更新文件meta信息 api()	3
	2.5.1. 发送参数	3
	2.5.2. 返回数字或者自定义文本	4
	2.6. 二进制文件的传输，使用常见的http即可	4
	2.7. 设置参数	4
	2.8. 其他规划	4

Ptp mtp ums协议接口
一般默认会支持这么几个接口，方便照片管理等。。普通的管理功能都是可以的。。

不过貌似不方便 结构化 精细化 查询 统计等。。
 扩展rest接口

扩展rest接口可以拓展额外的功能。以及结构化查询 精细化 。。统计等。。
接口数据格式 一般为json了。。
异常返回，也是异常序列化为json返回。。
查询情况下，一般返回json数组。
操作情况下，可能返回数字或者自定义文本。

常见场景
查询  5月到7月15日之间的图片。。
筛选体积 分辨率大于一定条件的图片 文件等。。
查询拍摄地点在xxx地点的文件。
各种条件组合查询。。

查询文件与图片与影片meta元数据（方便精细化结构化查询）
Url：  http://host:port/query_api?param={}
 参数为json对象，具体字段如下

参数(英文版）
参数(中文版）
含义
范例
参数类型
storePostion
存储位置
存储位置
文件为路径名称
如为数据，则可能为表名 对象名等
/aaa

字符串
queryFields
查询字段
查询字段
仅限查询时候使用
名称，备注
字符串，逗号分隔
Condition
条件
条件
名称like ’%外出拍摄%’ and 体积>22 and 单位=’kb’
字符串，支持常见表达式
支持模糊查询
Order
数据排序依据字段
数据排序依据字段
仅限查询时候使用
Id,名称
仅限查询时候使用
Page
页数
翻页 仅限查询时候使用
1
数字 
Pagesize
每页条数
每页条数数 仅限查询时候使用
10
数字
 





返回 ：json数组 
一般包括文件名称，路径，二进制url等，体积大小，分辨率等详细，拍摄时间等
操作与更新文件meta信息 api()
操作与更新一般使用ptp mtp协议即可，扩展协议的优点是可以根据条件批量操作与更新
比如可以把 文件按照一定的条件，批量移动到指定目录。
发送参数

Url：  http://host:port/op_api?param={}

参数(英文版）
参数(中文版）
含义
范例
参数类型
op
操作
操作类型
add添加
Update更新
Del 删除
字符串
storePostion
存储位置
存储位置
文件为路径名称
如为数据，则可能为表名 对象名等
/aaa

字符串
Condition
条件
条件
名称like ’%外出拍摄%’ and 体积>22 and 单位=’kb’
字符串，支持常见表达式
支持模糊查询
Data
数据内容
更新和新增数据
的字段与内容
普通数据为json对象
二进制数据字段为base64字符串


返回数字或者自定义文本
二进制文件的传输，使用常见的http即可
设置参数
Url：  http://host:port/set_camera_param_api?param={ 影像解析度:””,照片解析度:””,移动侦测:”开启、关闭”,闪烁频率:””,白平衡:””,曝光：””,时间：””,”参数n:””}

 其他规划
多位置同时查询

